#+TITLE: Eshell Configuration
#+OPTIONS: toc:nil num:nil ^:nil

#+BEGIN_SRC emacs-lisp
  (setq eshell-save-history-on-exit t
        eshell-cmpl-dir-ignore "\\`\\(\\.\\.?\\|CVS\\|\\.svn\\|\\.git\\)/\\'")

  (eval-after-load 'esh-opt
    '(progn
       (require 'em-cmpl)
       (require 'em-prompt)
       (require 'em-term)
       (setenv "PAGER" "cat")
       (add-to-list 'eshell-visual-commands "ssh")
       (add-to-list 'eshell-visual-commands "tail")))
#+END_SRC

#+BEGIN_SRC emacs-lisp
  (defun eshell/cds ()
    "Change directory to the project's root."
    (eshell/cd (projectile-project-root)))
#+END_SRC

#+BEGIN_SRC emacs-lisp
  (defun eshell/clear ()
    "Clear the eshell buffer."
    (interactive)
    (let ((inhibit-read-only t))
      (erase-buffer)
      (eshell-send-input)))

  (add-hook 'eshell-mode-hook
            '(lambda()
               (company-mode -1)
               (local-set-key (kbd "C-l") 'eshell/clear)))
#+END_SRC
